language: python
python:
- '3.5'
before_install:
- export MPLBACKEND='Agg'
- wget -q https://repo.continuum.io/miniconda/Miniconda3-latest-Linux-x86_64.sh -O
  miniconda.sh
- export MINICONDA_PREFIX="$HOME/miniconda"
- bash miniconda.sh -b -p $MINICONDA_PREFIX
- export PATH="$MINICONDA_PREFIX/bin:$PATH"
- conda config --set always_yes yes
- conda update -q conda
- conda config --add channels bioconda
- conda config --add channels conda-forge
- conda info -a
install:
- wget -q https://raw.githubusercontent.com/qiime2/environment-files/master/2018.6/release/qiime2-2018.6-py35-linux-conda.yml
- conda env create -q -n test-env --file qiime2-2018.6-py35-linux-conda.yml
- source activate test-env
- conda install -q pytest-cov coveralls scnic>=0.5.3
- pip install --no-cache-dir --editable .
script:
- py.test --cov q2_SCNIC --cov-report term-missing
after_success:
- coveralls
deploy:
  provider: pypi
  user: michael.shaffer
  password:
    secure: iag2TCMd+OW3LNna9tJ1QYBmT+frCylevCmSKAvx28nU75Z/hlseCGBXTl5ayvbSRQoANDe6PeS6lZ6n4v7N/2MmlEGluyeqb3zAdqpGFMn0//hoC7OweUTF8+D6NdV75+TsTo0W4cDWVDPVAivA8toZ1PPnna63KKs9f5ssvyN/QfViyjvyhh/W2XO0U0oTYeWxjoxqyvfvuY2pAymZupquJXMc1eA1ch3FSKJya4tXcs+jpJYSr+d14a2rp8KjidZNesWgtnKOJtJ+H/scaO6qDCj0cgQLyqEqfz5xbZrD/eWp48CiRZvtQQEUQAvaaqxeUGo4Bs0ibBRa9bFQzOWDK5YeaAXj2y9wduzyOMbbiPQoAkZ3LSL17aRuaUr5tAKoVh2TcwzUcq3VIt+B3MRy0duwR0ah+afmc2t0DXxW4XwQ9vYt4ALTbCcjqzRipfx6KRmEzuH+2ozQFwIbILJbSJyWUv5XFmtuOqz7QG/ITvW4AftQQ+yjWbRjG3x1BURXnl6W94EDWKOsho6twY1yDU8q5R+BjkNtkbd1DRu94fBoCv9jRP7j/Zlk0uo2gXUmpJ7d4wT+Ho311kcvoVbUsakupZzuORlZOIwhIA7NmBKAwld8MINU3W5cZkYucmpkVnh9rzplwHTuOrqRa1rkTVDpHeR8LOFgxmxdEOs=
  on:
    tags: true
    distributions: sdist bdist_wheel
    repo: shafferm/q2-SCNIC
